name: Build e Envio para Docker Hub

on:
  push:
    branches:
      - main

jobs:
  build_and_push:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v2

      # Criar o Docker config com o token de acesso
      - name: Configurar Docker config
        run: echo "{\"auths\":{\"https://index.docker.io/v1/\":{\"auth\":\"$(echo -n lord143:${{ secrets.DOCKERHUB_TOKEN }} | base64)\"}}}" > ~/.docker/config.json

      # Construir a imagem Docker
      - name: Build Docker image
        run: docker build -t lord143/chat-multiRoom .

      # Enviar a imagem para o Docker Hub
      - name: Push image to Docker Hub
        run: docker push lord143/chat-multiRoom
